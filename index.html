<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-box">
            <div class="loading-spinner"></div>
            <div id="loadingText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>
    </div>

    <!-- User Selection Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box" style="max-width: 600px;">
            <div class="login-logo">üë•</div>
            <h2 class="login-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
            <div id="loginError" class="error-message"></div>
            
            <!-- Department Filter -->
            <div class="form-group">
                <label class="form-label">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å</label>
                <select class="form-input" id="departmentFilter" onchange="OrderSystemAuth.filterUsersByDepartment()">
                    <option value="all">‡∏ó‡∏∏‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å</option>
                </select>
            </div>
            
            <!-- Search Box -->
            <div class="form-group">
                <input type="text" class="form-input" id="userSearch" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠..." onkeyup="OrderSystemAuth.searchUsers()">
            </div>
            
            <!-- Users Grid -->
            <div id="usersGrid" class="users-selection-grid">
                <!-- User cards will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <header class="header">
            <div class="header-content">
                <div class="logo" onclick="goHome()" style="cursor: pointer;" title="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">
                    <span>üì¶</span>
                    <span>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô</span>
                </div>
                <div class="header-actions">
                    <div class="user-info">
                        <span>üë§</span>
                        <span id="currentUser">User</span>
                    </div>
                    <button class="nav-btn" onclick="openCart()">
                        <span>üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</span>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    <button id="adminBtn" class="nav-btn hidden" onclick="toggleAdminPanel()">
                        <span>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
                    </button>
                    <button class="nav-btn" onclick="toggleDarkMode()">
                        <span id="darkModeIcon">üåô</span>
                    </button>
                    <button class="nav-btn" onclick="logout()">
                        <span>üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                    </button>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Order Section -->
            <div id="orderSection">
                <div class="department-section">
                    <h2>1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                    <div class="department-grid" id="orderDateGrid">
                        <!-- Order Dates will be dynamically inserted here -->
                    </div>
                    <button class="history-btn" onclick="toggleOrderHistory()">üìã ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                    <div id="orderHistory" class="order-history hidden"></div>
                </div>

                <div id="categorySection" class="hidden">
                    <h2>2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <div class="category-tabs" id="categoryTabs">
                        <!-- Categories will be dynamically inserted here -->
                    </div>
                    <div class="form-group" style="margin-bottom: 2rem;">
                        <input type="text" class="form-input" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...">
                    </div>
                    <div class="products-grid" id="productsGrid">
                        <!-- Products will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Admin Panel -->
            <div id="adminPanel" class="admin-panel">
                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="showAdminTab('manageDates')">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                    <button class="admin-tab" onclick="showAdminTab('summary')">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                </div>

                <div id="adminContent">
                    <!-- Admin content will be dynamically inserted here -->
                </div>
            </div>
        </div>

        <!-- Cart Modal -->
        <div class="cart-modal" id="cartModal">
            <div class="cart-content">
                <div class="cart-header">
                    <h2 id="cartTitle">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                    <button class="close-cart" onclick="closeCart()">&times;</button>
                </div>
                <div id="cartItems">
                    <!-- Cart items will be dynamically inserted here -->
                </div>
                <div class="cart-total">
                    <button id="deleteOrderBtn" class="delete-btn hidden" onclick="deleteCurrentOrder()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                    <button id="checkoutBtn" class="checkout-btn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PIN Modal -->
    <div id="pinModal" class="cart-modal" style="display: none;"> <!-- Reuse cart-modal style for now -->
        <div class="cart-content" style="max-width: 350px;">
            <div class="cart-header">
                <h2 id="pinModalTitle">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™ PIN</h2>
                <button class="close-cart" onclick="OrderSystemAuth.closePinModal()">&times;</button>
            </div>
            <div id="pinError" class="error-message" style="display: none; margin-bottom: 1rem;">‡∏£‡∏´‡∏±‡∏™ PIN ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</div>
            <div class="form-group">
                <input type="password" class="form-input" id="pinInput" placeholder="‡∏£‡∏´‡∏±‡∏™ PIN 4-6 ‡∏´‡∏•‡∏±‡∏Å" maxlength="6" inputmode="numeric" pattern="[0-9]*">
            </div>
            <div style="text-align: center;">
                <button id="submitPinBtn" class="login-btn" onclick="OrderSystemAuth.submitPin()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </div>
    </div>

    <!-- Print Area -->
    <div id="print-area"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/admin.js"></script>
    <script>
        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            OrderSystem.init();
        });
    </script>
</body>
</html>